<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Giải mã kích thước đối tượng Java: Tiêu đề nhỏ gọn, Oops nén và hơn thế nữa - Java &amp; JavaScript hub</title><meta name="description" content="Giới thiệu Đo kích thước của đối tượng trong Java không phải&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><meta name="theme-color" content="#17181E" media="(prefers-color-scheme: dark)"><meta name="theme-color" content="#D73A42" media="(prefers-color-scheme: light)"><meta name="msapplication-navbutton-color" content="#D73A42"><meta name="apple-mobile-web-app-status-bar-style" content="#D73A42"><link rel="canonical" href="https://chung142003.github.io/laptrinhmang/giai-ma-kich-thuoc-doi-tuong-java-tieu-de-nho-gon-oops-nen-va-hon-the-nua.html"><link rel="alternate" type="application/atom+xml" href="https://chung142003.github.io/laptrinhmang/feed.xml"><link rel="alternate" type="application/json" href="https://chung142003.github.io/laptrinhmang/feed.json"><meta property="og:title" content="Giải mã kích thước đối tượng Java: Tiêu đề nhỏ gọn, Oops nén và hơn thế nữa"><meta property="og:image" content="https://chung142003.github.io/laptrinhmang/media/website/manhinhkhoa.jpg"><meta property="og:image:width" content="735"><meta property="og:image:height" content="413"><meta property="og:site_name" content="Java & JavaScript hub"><meta property="og:description" content="Giới thiệu Đo kích thước của đối tượng trong Java không phải&hellip;"><meta property="og:url" content="https://chung142003.github.io/laptrinhmang/giai-ma-kich-thuoc-doi-tuong-java-tieu-de-nho-gon-oops-nen-va-hon-the-nua.html"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://chung142003.github.io/laptrinhmang/media/website/2.jpg" type="image/x-icon"><link rel="preload" href="https://chung142003.github.io/laptrinhmang/assets/dynamic/fonts/publicsans/publicsans.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://chung142003.github.io/laptrinhmang/assets/css/style.css?v=d89a6ca52b9ab366d88c90ce5d4179da"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://chung142003.github.io/laptrinhmang/giai-ma-kich-thuoc-doi-tuong-java-tieu-de-nho-gon-oops-nen-va-hon-the-nua.html"},"headline":"Giải mã kích thước đối tượng Java: Tiêu đề nhỏ gọn, Oops nén và hơn thế nữa","datePublished":"2024-12-26T22:38+07:00","dateModified":"2024-12-29T14:17+07:00","image":{"@type":"ImageObject","url":"https://chung142003.github.io/laptrinhmang/media/website/christmas-star.png","height":512,"width":512},"description":"Giới thiệu Đo kích thước của đối tượng trong Java không phải&hellip;","author":{"@type":"Person","name":"đức chung ( chung choáy )","url":"https://chung142003.github.io/laptrinhmang/truong-doan-duc-chung/duc-chung-chung-choay/"},"publisher":{"@type":"Organization","name":"đức chung ( chung choáy )","logo":{"@type":"ImageObject","url":"https://chung142003.github.io/laptrinhmang/media/website/christmas-star.png","height":512,"width":512}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><link rel="stylesheet" href="https://chung142003.github.io/laptrinhmang/media/plugins/docSearch/docsearch.min.css"></head><body class="post-template"><div class="container"><div class="left-bar"><div class="left-bar__inner"><header class="header"><a class="logo" href="https://chung142003.github.io/laptrinhmang/"><img src="https://chung142003.github.io/laptrinhmang/media/website/christmas-star.png" alt="Java &amp; JavaScript hub" width="512" height="512"></a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle__box"><span class="navbar__toggle__inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://chung142003.github.io/laptrinhmang/" target="_self" aria-label="Home"><span>Home</span></a></li><li><a href="https://chung142003.github.io/laptrinhmang/" target="_self" aria-label="Profile Author"><span>Profile Author</span></a></li><li><a href="https://chung142003.github.io/laptrinhmang/tags/" target="_self" aria-label="Tags page"><span>Tags page</span></a></li></ul></nav><a class="logo logo--atbottom" href="https://chung142003.github.io/laptrinhmang/"><img src="https://chung142003.github.io/laptrinhmang/media/website/christmas-star.png" alt="Java &amp; JavaScript hub" width="512" height="512"></a></header></div></div><main class="main post"><article class="content content--attop"><header class="hero content__header"><div class="main__inner"><h1>Giải mã kích thước đối tượng Java: Tiêu đề nhỏ gọn, Oops nén và hơn thế nữa</h1></div></header><div class="content__meta content__meta--attop"><div class="content__meta--attop__inner"><div class="content__maintag"><svg width="20" height="20" aria-hidden="true" focusable="false"><use xlink:href="https://chung142003.github.io/laptrinhmang/assets/svg/svg-map.svg#tag"/></svg> Published in <a href="https://chung142003.github.io/laptrinhmang/tags/testtag/" class="metadata__maintag">Java</a></div><div class="content__date"><svg width="20" height="20" aria-hidden="true" focusable="false"><use xlink:href="https://chung142003.github.io/laptrinhmang/assets/svg/svg-map.svg#date"/></svg> <time datetime="2024-12-26T22:38">Thg 12 26, 2024</time></div></div></div><div class="main__inner"><div class="content__meta"><div class="content__author"><img src="https://chung142003.github.io/laptrinhmang/media/website/49c55a21-d276-46b1-bc10-e3f5bf259e39.jpg" loading="lazy" height="725" width="736" alt="đức chung ( chung choáy )" class="content__author__avatar"><div><a href="https://chung142003.github.io/laptrinhmang/truong-doan-duc-chung/duc-chung-chung-choay/" class="content__author__name">đức chung ( chung choáy )</a></div></div></div><div class="content__entry"><div class="sect1"><h2 id="_introduction">Giới thiệu</h2><div class="sectionbody"><div class="paragraph"><p>Đo kích thước của đối tượng trong Java không phải là việc đơn giản. Nền tảng này khuyến khích bạn xem xét các tham chiếu và trừu tượng hóa thay vì sử dụng bộ nhớ thô. Tuy nhiên, việc hiểu cách các đối tượng phù hợp với bộ nhớ có thể mang lại lợi ích đáng kể, đặc biệt là đối với các hệ thống hiệu suất cao, độ trễ thấp.</p></div><div class="paragraph"><p>Theo thời gian, JVM đã giới thiệu các tối ưu hóa như Compressed Ordinary Object Pointers (Compressed Oops) và gần đây hơn là Compact Object Headers. Mỗi yếu tố này có thể ảnh hưởng đến việc đối tượng của bạn trông lớn hay nhỏ như thế nào. Hiểu các yếu tố này giúp bạn lý giải về việc sử dụng bộ nhớ cụ thể hơn.</p></div></div></div><div class="sect1"><h2 id="_measuring_object_sizes">Đo kích thước vật thể</h2><div class="sectionbody"><div class="paragraph"><p>Về nguyên tắc, bạn có thể ước tính kích thước của đối tượng bằng cách tạo các thể hiện và quan sát những thay đổi trong bộ nhớ trống của JVM. Tuy nhiên, bạn phải trung hòa một số yếu tố nhất định để có được kết quả nhất quán. Ví dụ, tắt phân bổ TLAB ( <code>-XX:-UseTLAB</code>) giúp việc sử dụng bộ nhớ có thể quan sát trực tiếp hơn. Các phép đo lặp lại và tính toán trung bình có thể làm giảm tác động của GC và phân bổ đồng thời.</p></div><div class="paragraph"><p>GC có thể xảy ra khi bạn đang tạo đối tượng của mình. Điều này sẽ dẫn đến nhiều bộ nhớ trống hơn vào cuối so với khi bạn bắt đầu. Tôi bỏ qua bất kỳ kích thước âm nào trong thử nghiệm này ;) Các luồng khác trong hệ thống có thể sử dụng bộ nhớ cùng lúc. Tôi thực hiện nhiều thử nghiệm và lấy trung vị, loại bỏ bất kỳ giá trị ngoại lệ nào.</p></div><div class="paragraph"><p>Dưới đây là cách tiếp cận sơ bộ:</p></div><div class="listingblock"><div class="content"><pre class="rouge highlight"><code data-lang="java"><span class="kt">long</span> <span class="n">before</span> <span class="o">=</span> <span class="n">usedMemory</span><span class="o">();</span>
<span class="nc">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">createYourObject</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">after</span> <span class="o">=</span> <span class="n">usedMemory</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">approximateSize</span> <span class="o">=</span> <span class="n">after</span> <span class="o">-</span> <span class="n">before</span><span class="o">;</span></code></pre></div></div><div class="paragraph"><p><a href="https://github.com/Vanilla-Java/Blog/blob/main/core-concepts/src/main/java/blog/vanillajava/memory/SizeofTest.java">Kiểm tra SizeofTest.java</a> này là một kiểm tra đơn giản tạo ra một số đối tượng và đo bộ nhớ được sử dụng để tạo ra từng đối tượng. Thông thường, điều này giống với lượng bộ nhớ mà đối tượng giữ lại cho các đối tượng đơn giản.</p></div></div></div><div class="sect1"><h2 id="_approximate_layout_of_an_object">Bố cục gần đúng của một đối tượng</h2><div class="sectionbody"><table class="tableblock frame-all grid-all stretch"><colgroup><col><col><col></colgroup><thead><tr><th class="tableblock halign-left valign-top">Vùng nhớ</th><th class="tableblock halign-left valign-top">Sự miêu tả</th><th class="tableblock halign-left valign-top">Kích thước (Byte)</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Đánh dấu từ</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Thông tin tiêu đề bao gồm mã băm danh tính, trạng thái khóa và siêu dữ liệu GC</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">8 byte (trên JVM 64 bit)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Con trỏ lớp (Klass Pointer)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Tham chiếu đến siêu dữ liệu lớp của đối tượng, được sử dụng nội bộ bởi JVM</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Thông thường là 4 byte với Con trỏ lớp được nén, nếu không thì là 8 byte</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Độ dài mảng (Chỉ mảng)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Lưu trữ độ dài của mảng; chỉ có đối với các đối tượng mảng</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">4 byte</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trường thể hiện</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Các trường dữ liệu thực tế của đối tượng: nguyên thủy và tham chiếu</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Thay đổi tùy thuộc vào loại trường và sự liên kết</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Đệm</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Không gian chưa sử dụng để đảm bảo căn chỉnh đúng 8 byte của kích thước đối tượng</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">0 đến 7 byte, tùy theo nhu cầu</p></td></tr></tbody></table></div></div><div class="sect1"><h2 id="_jep_450_compact_object_headers_experimental">JEP 450: Tiêu đề đối tượng nhỏ gọn (Thử nghiệm)</h2><div class="sectionbody"><div class="paragraph"><p>Bắt đầu với Java 24 (Truy cập sớm), JVM giới thiệu <strong>Compact Object Headers</strong> thông qua <a href="https://openjdk.org/jeps/450">Đề xuất cải tiến Java 450</a></p></div><div class="sect2"><h3 id="_summary">Bản tóm tắt</h3><div class="paragraph"><p>Giảm kích thước của tiêu đề đối tượng trong HotSpot JVM từ 96 đến 128 bit xuống còn 64 bit trên kiến ​​trúc 64 bit. Điều này sẽ giảm kích thước heap, cải thiện mật độ triển khai và tăng vị trí dữ liệu.</p></div></div><div class="sect2"><h3 id="_goals">Mục tiêu</h3><div class="paragraph"><p>Khi được bật, tính năng này</p></div><div class="ulist"><ul><li><p>Phải giảm kích thước tiêu đề đối tượng xuống còn 64 bit (8 byte) trên nền tảng 64 bit mục tiêu (x64 và AArch64),</p></li><li><p>Nên giảm kích thước đối tượng và dung lượng bộ nhớ trên khối lượng công việc thực tế,</p></li><li><p>Không nên đưa vào hơn 5% thông lượng hoặc chi phí độ trễ trên nền tảng 64 bit mục tiêu và chỉ trong những trường hợp không thường xuyên, và</p></li><li><p>Không nên đưa vào thông lượng có thể đo lường được hoặc chi phí độ trễ trên các nền tảng 64 bit không phải mục tiêu.</p></li></ul></div></div></div></div><div class="sect1"><h2 id="_performance_considerations">Cân nhắc về hiệu suất</h2><div class="sectionbody"><div class="paragraph"><p>Dấu chân đối tượng nhỏ hơn có thể cải thiện hiệu suất bằng cách tăng số lượng đối tượng phù hợp với bộ đệm CPU, giảm chi phí GC và thậm chí cải thiện thời gian khởi động. Tuy nhiên, việc bật các tính năng này (hoặc tắt chúng) phải đi kèm với thử nghiệm và đánh giá chuẩn (ví dụ: sử dụng JMH). Tùy thuộc vào khối lượng công việc của bạn, các tối ưu hóa này có thể mang lại mức tăng khiêm tốn hoặc có tác động không đáng kể.</p></div><div class="paragraph"><p>Những cải tiến này có thể giúp tiết kiệm đáng kể chi phí và sử dụng tốt hơn các tài nguyên có sẵn cho các môi trường nhạy cảm với bộ nhớ, đặc biệt là những môi trường chạy dịch vụ vi mô, trong đó mỗi phiên bản có thể có không gian heap hạn chế.</p></div></div></div><div class="sect1"><h2 id="_sizeof_objects_with_different_options">Kích thước của các đối tượng với các tùy chọn khác nhau</h2><div class="sectionbody"><div class="ulist"><ul><li><p>Tiêu đề nhỏ gọn: <code>-XX:+UnlockExperimentalVMOptions -XX:+UseCompactObjectHeaders</code>trong Java 24 EA</p></li><li><p>Oops nén: <code>-XX:+UseCompressedOops</code>được thêm vào Java 8 làm mặc định cho kích thước heap lên đến 32 GB</p></li><li><p>Không nén Oops: <code>-XX:-UseCompressedOops</code>đối với kích thước heap trên 32 GB</p></li></ul></div><table class="tableblock frame-all grid-all stretch"><caption class="title">Bảng 1. Wrappers</caption><colgroup><col><col><col><col></colgroup><thead><tr><th class="tableblock halign-left valign-top">Lớp/Đối tượng</th><th class="tableblock halign-left valign-top">Tiêu đề nhỏ gọn</th><th class="tableblock halign-left valign-top">+Oops nén</th><th class="tableblock halign-left valign-top">-Oops nén</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Sự vật</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Boolean, Byte</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Ngắn, Nhân vật</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Số nguyên, Số thực</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Dài, Đôi</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td></tr></tbody></table><table class="tableblock frame-all grid-all stretch"><caption class="title">Bảng 2. Các lớp đơn giản</caption><colgroup><col><col><col><col></colgroup><thead><tr><th class="tableblock halign-left valign-top">Lớp/Đối tượng</th><th class="tableblock halign-left valign-top">Tiêu đề nhỏ gọn</th><th class="tableblock halign-left valign-top">+Oops nén</th><th class="tableblock halign-left valign-top">-Oops nén</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Nguyên tử nguyên tử</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Tham khảo nguyên tử</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Nguyên tử dài</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Tùy chọn, SimpleEntry</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">"Xin chào thế giới"</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Hoàn thành tương lai</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Tham chiếu yếu</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trình tạo chuỗi</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">56</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">56</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Mẫu</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">1056</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">1088</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">1240</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Mã UUID</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">216</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">240</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Ngoại lệ</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">712</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">728</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">896</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Địa phương</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">104</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">120</p></td></tr></tbody></table><table class="tableblock frame-all grid-all stretch"><caption class="title">Bảng 3. Ngày và giờ</caption><colgroup><col><col><col><col></colgroup><thead><tr><th class="tableblock halign-left valign-top">Lớp/Đối tượng</th><th class="tableblock halign-left valign-top">Tiêu đề nhỏ gọn</th><th class="tableblock halign-left valign-top">+Oops nén</th><th class="tableblock halign-left valign-top">-Oops nén</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Ngày</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Dấu thời gian</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Múi giờ</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">56</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">56</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Ngày địa phương, Giờ địa phương</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">128</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">136</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">168</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Ngày Giờ Địa Phương</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">160</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">184</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">224</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Ngày giờ theo vùng</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">208</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">232</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">288</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Lịch</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">528</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">560</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">648</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Ngay lập tức, Thời gian, Giai đoạn</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Mã vùng</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">56</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">56</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td></tr></tbody></table><table class="tableblock frame-all grid-all stretch"><caption class="title">Bảng 4. Các tập hợp có không/một/mười phần tử</caption><colgroup><col><col><col><col></colgroup><thead><tr><th class="tableblock halign-left valign-top">Lớp/Đối tượng</th><th class="tableblock halign-left valign-top">Tiêu đề nhỏ gọn</th><th class="tableblock halign-left valign-top">+Oops nén</th><th class="tableblock halign-left valign-top">-Oops nén</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">MảngDanh sách</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24/80/80</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24/80/80</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">32 / 128 / 128</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Danh sách liên kết</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">24/48/264</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">32 / 56 / 272</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">40 / 80 / 440</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">ConcurrentLinkedQueue</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">32/48/192</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">48 / 72 / 288</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">64 / 96 / 384</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Bản đồ băm đồng thời</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">64 / 168 / 384</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">64 / 176 / 464</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">96 / 280 / 384</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Bản đồ cây</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">48 / 80 / 368</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">48 / 88 / 448</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">80 / 136 / 640</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Bộ cây</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">64 / 96 / 384</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">64 / 160 / 464</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">104 / 160 / 664</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Bản đồ băm</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">40 / 144 / 360</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">48 / 160 / 448</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">64 / 248 / 608</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Bộ băm</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">56 / 160 / 376</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">64 / 176 / 464</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">88 / 272 / 632</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Bản đồ LinkedHash</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">56 / 168 / 456</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">64 / 184 / 544</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">88 / 288 / 792</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Bộ liên kếtHashSet</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">72 / 184 / 472</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">80/200/560</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">112 / 312 / 816</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Vector, chồng</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">80/80/80</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">88/88/88</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">128 / 128 / 128</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Bảng băm</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">96 / 120 / 440</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">112 / 144 / 544</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">168 / 208 / 768</p></td></tr></tbody></table><table class="tableblock frame-all grid-all stretch"><caption class="title">Bảng 5. Mảng</caption><colgroup><col><col><col><col></colgroup><thead><tr><th class="tableblock halign-left valign-top">Lớp/Đối tượng</th><th class="tableblock halign-left valign-top">Tiêu đề nhỏ gọn</th><th class="tableblock halign-left valign-top">+Oops nén</th><th class="tableblock halign-left valign-top">-Oops nén</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">BitSet mới(64)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">56</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">boolean mới[64], byte mới[64]</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">ngắn mới[64], ký tự mới[64]</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">144</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">144</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">144</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">int[64] mới, float[64] mới</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">272</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">272</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">272</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">mới dài[64], mới đôi[64]</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">528</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">528</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">528</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Đối tượng mới[64], Số nguyên mới[64], Chuỗi mới[64], Dài mới[64], Đôi mới[64]</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">272</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">272</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">528</p></td></tr></tbody></table><div class="admonitionblock note"><table><tbody><tr><td class="icon"> </td><td class="content">Những giá trị này chỉ mang tính gần đúng, phụ thuộc vào môi trường và nên được coi là giá trị minh họa hơn là giá trị tuyệt đối.</td></tr></tbody></table></div></div></div><div class="sect1"><h2 id="_about_the_author"><a class="anchor" href="https://blog.vanillajava.blog/2024/12/demystifying-java-object-sizes-compact.html#_about_the_author"></a>Về tác giả</h2><div class="sectionbody"><div class="paragraph"><p>Với tư cách là Tổng giám đốc điều hành của <a href="https://chronicle.software/" class="external" target="_blank" rel="noopener">Chronicle Software</a> , <a href="https://www.linkedin.com/in/peterlawrey/" class="external" target="_blank" rel="noopener">Peter Lawrey</a> lãnh đạo việc phát triển các giải pháp tiên tiến, độ trễ thấp được <a href="https://chronicle.software/8-out-of-11-investment-banks/" class="external" target="_blank" rel="noopener">8 trong số 11 ngân hàng đầu tư toàn cầu</a> tin tưởng . Với nhiều thập kỷ kinh nghiệm trong lĩnh vực công nghệ tài chính, ông chuyên cung cấp công nghệ hỗ trợ siêu hiệu quả giúp các doanh nghiệp xử lý khối lượng dữ liệu khổng lồ với tốc độ và độ tin cậy vô song. Chuyên môn kỹ thuật sâu rộng và niềm đam mê chia sẻ kiến ​​thức của Peter đã đưa ông trở thành người dẫn đầu tư duy và cố vấn trong cộng đồng Java và FinTech. Theo dõi Peter trên <a href="https://bsky.app/profile/peterlawrey.bsky.social" class="external" target="_blank" rel="noopener">BlueSky</a> hoặc <a href="https://mastodon.social/@PeterLawrey" class="external" target="_blank" rel="noopener">Mastodon</a> .</p></div></div></div><div class="sect1"><h2 id="_conclusion">Phần kết luận</h2><div class="sectionbody"><div class="paragraph"><p>Các phép trừu tượng của Java thường giúp bạn không phải lo lắng về chi tiết bộ nhớ, nhưng việc hiểu cách kích thước đối tượng thay đổi theo các cấu hình JVM khác nhau có thể giúp tinh chỉnh hiệu suất. Compact Headers và Compressed Oops là các tính năng mạnh mẽ cho phép bạn giảm dấu chân bộ nhớ và có khả năng cải thiện hiệu quả. Thử nghiệm, đo lường và đánh giá chuẩn mực chu đáo sẽ hướng dẫn bạn đưa ra những lựa chọn sáng suốt cho khối lượng công việc cụ thể của mình.</p></div><div class="paragraph"><p>Theo kinh nghiệm của tôi, việc xem xét kỹ lưỡng kích thước đối tượng đã chứng minh được giá trị khi xử lý các ứng dụng nhạy cảm với bộ nhớ, quy mô lớn. Việc kiểm tra các cấu hình này cho phép bạn khám phá sự cân bằng phù hợp cho các dịch vụ của mình và có khả năng tiết kiệm chi phí cơ sở hạ tầng.</p></div><div class="paragraph"><p>Hãy cân nhắc bắt đầu từ những điều nhỏ: đo một vài đối tượng, chuyển đổi cài đặt TLAB hoặc Compressed Oops và xem những thay đổi. Theo thời gian, bạn sẽ xây dựng được mô hình tinh thần sâu hơn về cách bộ nhớ Java hoạt động, cho phép bạn viết mã hiệu quả và dễ dự đoán hơn.</p></div></div></div></div><footer class="content__footer"><div class="content__last-updated">This article was updated on <time datetime="2024-12-29T14:17">Thg 12 29, 2024</time></div><div class="content__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fchung142003.github.io%2Flaptrinhmang%2Fgiai-ma-kich-thuoc-doi-tuong-java-tieu-de-nho-gon-oops-nen-va-hon-the-nua.html" class="js-share facebook tltp tltp--top" aria-label="Facebook" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://chung142003.github.io/laptrinhmang/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://pinterest.com/pin/create/button/?url=https%3A%2F%2Fchung142003.github.io%2Flaptrinhmang%2Fgiai-ma-kich-thuoc-doi-tuong-java-tieu-de-nho-gon-oops-nen-va-hon-the-nua.html&amp;media=undefined&amp;description=Gi%E1%BA%A3i%20m%C3%A3%20k%C3%ADch%20th%C6%B0%E1%BB%9Bc%20%C4%91%E1%BB%91i%20t%C6%B0%E1%BB%A3ng%20Java%3A%20Ti%C3%AAu%20%C4%91%E1%BB%81%20nh%E1%BB%8F%20g%E1%BB%8Dn%2C%20Oops%20n%C3%A9n%20v%C3%A0%20h%C6%A1n%20th%E1%BA%BF%20n%E1%BB%AFa" class="js-share pinterest tltp tltp--top" aria-label="Pinterest" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://chung142003.github.io/laptrinhmang/assets/svg/svg-map.svg#pinterest"/></svg> <span>Pinterest</span> </a><a href="https://mix.com/add?url=https%3A%2F%2Fchung142003.github.io%2Flaptrinhmang%2Fgiai-ma-kich-thuoc-doi-tuong-java-tieu-de-nho-gon-oops-nen-va-hon-the-nua.html" class="js-share mix tltp tltp--top" aria-label="Share with Mix" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://chung142003.github.io/laptrinhmang/assets/svg/svg-map.svg#mix"/></svg> <span>Mix</span> </a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fchung142003.github.io%2Flaptrinhmang%2Fgiai-ma-kich-thuoc-doi-tuong-java-tieu-de-nho-gon-oops-nen-va-hon-the-nua.html" class="js-share linkedin tltp tltp--top" aria-label="Share with LinkedIn" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://chung142003.github.io/laptrinhmang/assets/svg/svg-map.svg#linkedin"/></svg> <span>LinkedIn</span> </a><a href="https://buffer.com/add?text=Gi%E1%BA%A3i%20m%C3%A3%20k%C3%ADch%20th%C6%B0%E1%BB%9Bc%20%C4%91%E1%BB%91i%20t%C6%B0%E1%BB%A3ng%20Java%3A%20Ti%C3%AAu%20%C4%91%E1%BB%81%20nh%E1%BB%8F%20g%E1%BB%8Dn%2C%20Oops%20n%C3%A9n%20v%C3%A0%20h%C6%A1n%20th%E1%BA%BF%20n%E1%BB%AFa&amp;url=https%3A%2F%2Fchung142003.github.io%2Flaptrinhmang%2Fgiai-ma-kich-thuoc-doi-tuong-java-tieu-de-nho-gon-oops-nen-va-hon-the-nua.html" class="js-share buffer tltp tltp--top" aria-label="Buffer" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://chung142003.github.io/laptrinhmang/assets/svg/svg-map.svg#buffer"/></svg> <span>Buffer</span> </a><a href="https://api.whatsapp.com/send?text=Gi%E1%BA%A3i%20m%C3%A3%20k%C3%ADch%20th%C6%B0%E1%BB%9Bc%20%C4%91%E1%BB%91i%20t%C6%B0%E1%BB%A3ng%20Java%3A%20Ti%C3%AAu%20%C4%91%E1%BB%81%20nh%E1%BB%8F%20g%E1%BB%8Dn%2C%20Oops%20n%C3%A9n%20v%C3%A0%20h%C6%A1n%20th%E1%BA%BF%20n%E1%BB%AFa https%3A%2F%2Fchung142003.github.io%2Flaptrinhmang%2Fgiai-ma-kich-thuoc-doi-tuong-java-tieu-de-nho-gon-oops-nen-va-hon-the-nua.html" class="js-share whatsapp tltp tltp--top" title="Share with LinkedIn" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://chung142003.github.io/laptrinhmang/assets/svg/svg-map.svg#whatsapp"/></svg> <span>WhatsApp</span></a></div></footer></div></article><div class="content__section post__related"><div class="main__inner"><h3 class="content__section__title">Related post</h3><div class="post__related__wrap"><article class="c-card"><div class="c-card__meta"><div class="c-card__author"><img src="https://chung142003.github.io/laptrinhmang/media/website/49c55a21-d276-46b1-bc10-e3f5bf259e39.jpg" loading="lazy" height="725" width="736" alt="đức chung ( chung choáy )"> <a href="https://chung142003.github.io/laptrinhmang/truong-doan-duc-chung/duc-chung-chung-choay/">đức chung ( chung choáy )</a></div><time datetime="2024-12-26T22:39">Thg 12 26, 2024 </time><a href="https://chung142003.github.io/laptrinhmang/tags/testtag/" class="c-card-tag">Java</a></div><header class="c-card__header"><h2 class="c-card__title"><a href="https://chung142003.github.io/laptrinhmang/cac-doi-tuong-co-the-sao-chep-de-dang-trong-java.html">Các đối tượng có thể sao chép dễ dàng trong Java</a></h2><p>Tóm lại Vấn đề: Việc tuần tự hóa chuẩn của Java có thể&hellip;</p></header></article></div></div></div><div class="content__section content__comments"><div class="main__inner"><div class="comments"><div class="comments-wrapper"><h2>Comments</h2><div class="fb-comments" data-href="https://chung142003.github.io/laptrinhmang/giai-ma-kich-thuoc-doi-tuong-java-tieu-de-nho-gon-oops-nen-va-hon-the-nua.html" data-width="100%" data-colorscheme="light" data-lazy="true" data-order-by="reverse_time" data-numposts="5"></div><noscript>Please enable JS to use the comments form.</noscript></div></div><div id="fb-root"></div><script type="text/javascript" async defer="defer" crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v12.0">nonce="n4mWU9e7"</script></div></div></main><div class="right-bar"><div class="right-bar__inner"><div class="sidebar"><section class="box authors"><h3 class="box__title">Authors</h3><ul class="authors__cotainer"><li class="authors__item"><a href="https://chung142003.github.io/laptrinhmang/truong-doan-duc-chung/code-hay-ngu/" class="authors__image"><img src="https://chung142003.github.io/laptrinhmang/media/website/chill-guy.jpg" loading="lazy" alt="code hay ngủ" height="420" width="420" class="authors__img"></a><div><a href="https://chung142003.github.io/laptrinhmang/truong-doan-duc-chung/code-hay-ngu/" class="authors__title">code hay ngủ</a> <span class="authors__meta">Post: 8</span></div></li><li class="authors__item"><a href="https://chung142003.github.io/laptrinhmang/truong-doan-duc-chung/duc-chung-chung-choay/" class="authors__image"><img src="https://chung142003.github.io/laptrinhmang/media/website/49c55a21-d276-46b1-bc10-e3f5bf259e39.jpg" loading="lazy" alt="đức chung ( chung choáy )" height="725" width="736" class="authors__img"></a><div><a href="https://chung142003.github.io/laptrinhmang/truong-doan-duc-chung/duc-chung-chung-choay/" class="authors__title">đức chung ( chung choáy )</a> <span class="authors__meta">Post: 10</span></div></li></ul></section><section class="box tags"><h3 class="box__title">Recommended Topics</h3><ul class="tags__list"><li class="tags__item"><a href="https://chung142003.github.io/laptrinhmang/tags/fact-coder/" class="btn btn--gray">Fact coder <sup>(6)</sup></a></li><li class="tags__item"><a href="https://chung142003.github.io/laptrinhmang/tags/fun-fact/" class="btn btn--gray">Fun Fact <sup>(3)</sup></a></li><li class="tags__item"><a href="https://chung142003.github.io/laptrinhmang/tags/testtag/" class="btn btn--gray">Java <sup>(7)</sup></a></li><li class="tags__item"><a href="https://chung142003.github.io/laptrinhmang/tags/javascript/" class="btn btn--gray">JavaScript <sup>(3)</sup></a></li><li class="tags__item"><a href="https://chung142003.github.io/laptrinhmang/tags/kiem-tien/" class="btn btn--gray">kiếm tiền <sup>(2)</sup></a></li><li class="tags__item"><a href="https://chung142003.github.io/laptrinhmang/tags/profile/" class="btn btn--gray">Profile <sup>(0)</sup></a></li></ul></section><section class="box newsletter"><h3 class="box__title">Subscribe to Mono</h3><p class="newsletter__desc">Sign up to receive email updates and to hear what's going on with us!</p>bạn có thể đọc thêm ở bách khoa page</section><div class="box follow"><a href="https://www.facebook.com/chung.truong.614308/" class="tltp tltp--top" aria-label="Facebook"><svg><use xlink:href="https://chung142003.github.io/laptrinhmang/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://www.instagram.com/truong_doan_duc_chung/" class="tltp tltp--top" aria-label="Instagram"><svg><use xlink:href="https://chung142003.github.io/laptrinhmang/assets/svg/svg-map.svg#instagram"/></svg> <span>Instagram</span> </a><a href="https://www.youtube.com/c/Tr%E1%BB%B1cTi%E1%BA%BFpGameVN" class="tltp tltp--top" aria-label="Youtube"><svg><use xlink:href="https://chung142003.github.io/laptrinhmang/assets/svg/svg-map.svg#youtube"/></svg> <span>Youtube</span></a></div><div class="box copyright">Powered chung choáy - careful when you want stolen</div></div></div></div></div><script defer="defer" src="https://chung142003.github.io/laptrinhmang/assets/js/scripts.min.js?v=b2d91bcadbf5db401b76eb5bb3092eb7"></script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script src="https://chung142003.github.io/laptrinhmang/media/plugins/docSearch/docsearch.min.js"></script><script type="text/javascript">docsearch({
				container: '#docsearch',
				appId: '',
				indexName: '',
				apiKey: '',
				debug: false
			});</script></body></html>